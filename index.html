<!DOCTYPE html>
<html>

<head>
  <title>VK-app</title>
  <script src="https://unpkg.com/vue"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
</head>

<body>
  <div id="app">
	<div class="mx-auto form-inline" style="width: 300px; margin-top: 10px;">
	  <input class="form-control w-75 mr-2" placeholder="Name" v-model="findText"/>
	  <button class="btn btn-success" @click="show(findText)">Show</button>
    </div>
	<hr>
	</ul>
	<div v-for="image in images">
		<img class="d-block mx-auto w-50" style="margin: 10px;" alt="img" :src='image' ></img>
	</div>
  </div>

  <script>
   vkBridge.send('VKWebAppInit');
		
    var app = new Vue({
      el: '#app',
      data: {
	  images: [],
	  findText:"",
      },
	  methods:{
		show: async function (name)
		{
			app.images = [];
			console.log(app.findText);
			let response = await fetch('https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key='+'641226d7eabf73a4dbfb1be630fd458e'+'&tags='+app.findText+'&per_page=10&page=1&format=json&nojsoncallback=1')
			let json = await response.json();
			
			let picArray = json.photos.photo.map((pic) => {
			var srcPath = 'https://farm'+pic.farm+'.staticflickr.com/'+pic.server+'/'+pic.id+'_'+pic.secret+'.jpg';
				
			app.images.push(srcPath);

			})
		},
		remove: function(name)
		{
			var arr = app.records;
			var index = arr.indexOf(name);
			arr.splice(index,1);
		}
	  }
	  
    })
  </script>
</body>
</html>